"use strict";(self.webpackChunkcommit_front=self.webpackChunkcommit_front||[]).push([[517],{2472:(e,s,t)=>{t.d(s,{A:()=>o});var n=t(5043),l=t(3216),i=t(6812),a=t(4904),c=t(9401),r=t(579);const o=function(e){const[s,t]=(0,n.useState)([]),o=(0,l.Zp)();return(0,n.useEffect)((()=>{t(e.articleList)}),[e.articleList]),(0,r.jsx)(i.A,{style:{margin:"16px auto"},children:(0,r.jsxs)("div",{className:"re-card",children:[(0,r.jsxs)("div",{className:"re-title",children:["\u70ed\u95e8\u6587\u7ae0",(0,r.jsx)("span",{style:{marginLeft:"7px"},children:(0,r.jsx)(a.A,{twoToneColor:"#e0730d"})})]}),(0,r.jsx)("div",{className:"re-list",children:s.length?s.map(((e,s)=>(0,r.jsxs)("p",{onClick:()=>o(`/article/${e.id}`),children:[(0,r.jsxs)("span",{className:"re-content",children:[s+1," \u3001\xa0 ",e.title]}),(0,r.jsx)("span",{style:{marginLeft:"7px"},children:(0,r.jsx)(c.A,{twoToneColor:"#858585"})}),(0,r.jsx)("span",{style:{marginLeft:"7px"},children:e.viewCount})]},s))):null})]})})}},2517:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var n=t(5043),l=t(6558),i=t(5639),a=t(7505),c=t(6812),r=t(9998),o=t(8387),d=t(3216),h=t(6191),m=t(2252),x=t(9654),u=t(5565),v=t(2030),j=t(579);const g=function(e){const{articleInfo:s}=e,[t,l]=(0,n.useState)([]),[i,a]=(0,n.useState)(""),g=(0,d.Zp)();(0,n.useEffect)((()=>{console.log(e);let{content:t,tagList:n}=s;t=p(t),a(t),l(JSON.parse(n))}),[e.articleInfo.id]);const p=e=>e.replace(/<[^>]*>?/gm,"");return(0,j.jsx)(c.A,{style:{margin:"16px auto"},onClick:()=>g(`/article/${s.id}`),children:(0,j.jsxs)("div",{className:"card-main",children:[(0,j.jsx)("div",{className:"card-title",children:s.title}),(0,j.jsx)(r.A,{}),(0,j.jsx)("div",{className:"card-content",children:i}),(0,j.jsx)(r.A,{}),(0,j.jsxs)("div",{className:"card-footer",children:[(0,j.jsxs)("div",{className:"viewCount",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{style:{margin:"0 7px 0 0"}}),s.viewCount]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(m.A,{style:{margin:"0 3px 0 7px"}}),(0,j.jsxs)("span",{children:[" ",(0,v.H1)(s.comments)]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(x.A,{style:{margin:"0 3px 0 7px"}}),(0,j.jsx)("span",{children:s.collectionCount})]})]}),(0,j.jsx)(r.A,{type:"vertical",style:{marginRight:7}}),(0,j.jsxs)("div",{className:"viewCount",children:[(0,j.jsx)(u.A,{style:{marginRight:7}}),t.map((e=>(0,j.jsx)(o.A,{color:"#2db7f5",children:e},e)))]}),(0,j.jsx)(r.A,{type:"vertical",style:{marginRight:7}}),(0,j.jsxs)("div",{className:"timeAndAuthor",children:[(0,j.jsx)("div",{className:"createAt",children:"\u53d1\u5e03\u65f6\u95f4\uff1a"+s.createdAt}),(0,j.jsx)("div",{children:"\u4f5c\u8005\uff1a"+s.author})]})]})]})})};var p=t(8823),f=t(9456),A=t(2472),N=t(9347);const{Search:y}=l.A,w=new WebSocket("ws://127.0.0.1:9998");function S(){const[e,s]=(0,n.useState)(!1),[t,l]=(0,n.useState)([]),[c,r]=(0,n.useState)([]),[o,d]=(0,n.useState)(1),[h,m]=(0,n.useState)(""),x=(0,f.d4)((e=>e.user)),u=(0,N.Ay)();(0,n.useEffect)((()=>{v(),Promise.allSettled([C(),S()]).then((()=>console.log("\u52a0\u8f7d\u6570\u636e\u5b8c\u6210"))).catch((e=>console.error(e)))}),[]);const v=()=>{w.onopen=()=>{console.log("\u670d\u52a1\u5668\u94fe\u63a5\u6210\u529f"),w.send(JSON.stringify({toName:x.username}))},w.onmessage=e=>{u.emit("getNotice",JSON.parse(e.data))},w.onerror=e=>{console.error("socket\u9519\u8bef:"+e)},w.onclose=()=>{console.log("socket\u5df2\u5173\u95ed")}},S=async function(){let e={pageNum:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,pageSize:arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,keyword:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""};try{const s=await(0,p.E)("/getArticleList",{data:e});console.log(null===s||void 0===s?void 0:s.data.rows),null!==s&&void 0!==s&&s.data.rows&&l([...null===s||void 0===s?void 0:s.data.rows])}catch(s){console.error(s)}},C=async function(){let e={pageNum:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,pageSize:arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,keyword:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""};try{const s=await(0,p.E)("/getRecommendArticleList",{data:e});null!==s&&void 0!==s&&s.data.rows&&r(null===s||void 0===s?void 0:s.data.rows)}catch(s){console.error(s)}},k=()=>{S(1,10,h)};return(0,j.jsxs)("div",{className:"home_content",children:[(0,j.jsx)(a.A,{}),(0,j.jsxs)("div",{className:"home_under_content",children:[(0,j.jsx)("div",{className:"home_left_content",children:(0,j.jsx)(A.A,{articleList:c})}),(0,j.jsxs)("div",{className:"home_right_content",children:[(0,j.jsx)("div",{className:"home_search",children:(0,j.jsx)(y,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",enterButton:!0,onChange:e=>m(e.target.value),value:h,onPressEnter:k,onSearch:k,style:{width:"50%"}})}),(0,j.jsx)("div",{className:"home_list",children:(0,j.jsx)(i.Ay,{dataSource:t,renderItem:e=>(0,j.jsx)(i.Ay.Item,{children:(0,j.jsx)(g,{articleInfo:e})})})})]})]})]})}},2030:(e,s,t)=>{t.d(s,{H1:()=>n});t(3488);const n=e=>{if(!e)return 0;let s=e.length;return e.forEach((e=>{s+=null===e||void 0===e?void 0:e.replies.length})),s}}}]);
//# sourceMappingURL=517.9754e026.chunk.js.map