"use strict";(self.webpackChunkcommit_front=self.webpackChunkcommit_front||[]).push([[936],{8548:(e,n,t)=>{t.d(n,{A:()=>v});var A=t(6540),a=t(7767),r=t(6824),s=t(4925),o=t(3678),i=t(5072),c=t.n(i),l=t(7825),m=t.n(l),d=t(7659),p=t.n(d),u=t(5056),E=t.n(u),g=t(540),f=t.n(g),h=t(1113),y=t.n(h),C=t(3304),x={};x.styleTagTransform=y(),x.setAttributes=E(),x.insert=p().bind(null,"head"),x.domAPI=m(),x.insertStyleElement=f(),c()(C.A,x),C.A&&C.A.locals&&C.A.locals;const v=function(e){const[n,t]=(0,A.useState)([]),i=(0,a.Zp)();return(0,A.useEffect)((()=>{t(e.articleList)}),[e.articleList]),A.createElement(r.A,{style:{margin:"16px auto"}},A.createElement("div",{className:"re-card"},A.createElement("div",{className:"re-title"},"热门文章",A.createElement("span",{style:{marginLeft:"7px"}},A.createElement(s.A,{twoToneColor:"#e0730d"}))),A.createElement("div",{className:"re-list"},n.length?n.map(((e,n)=>A.createElement("p",{onClick:()=>i(`/article/${e.id}`),key:n},A.createElement("span",{className:"re-content"},n+1," 、  ",e.title),A.createElement("span",{style:{marginLeft:"7px"}},A.createElement(o.A,{twoToneColor:"#858585"})),A.createElement("span",{style:{marginLeft:"7px"}},e.viewCount)))):null)))}},1936:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ue});var A=t(6540),a=t(7767),r=t(5072),s=t.n(r),o=t(7825),i=t.n(o),c=t(7659),l=t.n(c),m=t(5056),d=t.n(m),p=t(540),u=t.n(p),E=t(1113),g=t.n(E),f=t(2047),h={};h.styleTagTransform=g(),h.setAttributes=d(),h.insert=l().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=u(),s()(f.A,h),f.A&&f.A.locals&&f.A.locals;var y=t(2691),C=t(428),x=t(2741),v=t(9391),b=t(8548),I=t(6824),B=t(964),k=t(5474),w=t(7450),N=t(5619),L=t(2513),R=t(6705),S={};S.styleTagTransform=g(),S.setAttributes=d(),S.insert=l().bind(null,"head"),S.domAPI=i(),S.insertStyleElement=u(),s()(R.A,S),R.A&&R.A.locals&&R.A.locals;const T=function(e){const{description:n,email:t,username:a}=e.authorInfo;return A.createElement(I.A,{style:{margin:"16px auto"},className:"au-card"},A.createElement("div",null,A.createElement("div",{className:"au-avatar"},A.createElement(B.A,{src:k.zu},a)),A.createElement("div",{style:{marginTop:"10px"}},A.createElement(w.A,null),A.createElement("span",{className:"au-text"},`作者: ${a}`)),A.createElement("div",null,A.createElement(N.A,null),A.createElement("span",{className:"au-text"},`email: ${t}`)),A.createElement("div",null,A.createElement(L.A,null),A.createElement("span",{className:"au-text"},`个人简介: ${n}`))))};var z=t(5556),M=t.n(z),Q=t(2364),H={};H.styleTagTransform=g(),H.setAttributes=d(),H.insert=l().bind(null,"head"),H.domAPI=i(),H.insertStyleElement=u(),s()(Q.A,H),Q.A&&Q.A.locals&&Q.A.locals;var Y=t(8159),D=t(2896),G=t(4103),V=t(7122),q=t(9468),F=t(52),P=t(870),Z=t(4364),J=t(400),W=t(212),K=t(6481),$=t(3598),j=t(4353),U=t.n(j),_=(t(6033),t(6279)),O=t.n(_);U().extend(O()),U().locale("zh-cn");const X=U();var ee=t(7897),ne=t(1086),te=t(4548);const{TextArea:Ae}=P.A,ae=A.memo((e=>{const{children:n,item:t,userInfo:a,articleId:r,commentId:s,replyId:o,replyVisible:i}=e,{user:c}=t,[l,m]=(0,A.useState)("");(0,A.useEffect)((()=>{i&&m("")}),[i]);const d=async()=>{if(!a.userId)return y.Ay.warn("您未登陆，请登录后再试。");let n={content:l,userId:a.userId,articleId:parseInt(r),commentId:s,type:2,replyTo:t?.user.id},A=await(0,Y.E)("/createComment",{data:n});200==A.status?(y.Ay.success("回复成功！"),e.setCommentList(A.data.comments),e.onReply({commentId:0,replyId:0})):y.Ay.error(A.errorMessage)};return A.createElement(K.A,{actions:[A.createElement("span",{onClick:()=>{e.onReply({commentId:s,replyId:o})}},"回复"),A.createElement(A.Fragment,null,1===a.role&&A.createElement(ne.A,{title:"是否删除该留言？",cancelText:"取消",okText:"确认",onConfirm:async()=>{if(o){let n={type:2,replyId:o};if(200==(await(0,Y.E)("/deleteComment",{data:n})).status){let n=[...e.commentList],t=n.find((e=>e.id===s));t.replies=t.replies.filter((e=>e.id!==o)),e.setCommentList(n),y.Ay.success("删除成功！")}}else{let n={type:1,commentId:s};if(200==(await(0,Y.E)("/deleteComment",{data:n})).status){let n=[...e.commentList];n=n.filter((e=>e.id!==s)),e.setCommentList(n),y.Ay.success("删除成功！")}}}},A.createElement($.A,null)))],author:A.createElement("span",null,c&&c.username),avatar:A.createElement(ee.A,{userInfo:c}),content:A.createElement("div",null,t.content),datetime:A.createElement(te.A,{title:t.createdAt},A.createElement("span",null,X(t.createdAt).fromNow()))},i&&A.createElement("div",{className:"reply-form"},A.createElement(Ae,{placeholder:`回复${c.username}...`,value:l,onChange:e=>{m(e.target.value)},onKeyUp:e=>{e.ctrlKey&&13===e.keyCode&&d()}}),A.createElement("div",{className:"reply-form-controls"},A.createElement(J.A,{htmlType:"submit",type:"primary",disabled:!l.trim(),onClick:d},"发布"))),n)})),re=e=>{const n=(0,D.d4)((e=>e.user)),{commentList:t,articleId:a}=e,[r,s]=(0,A.useState)({commentId:0,replyId:0});return A.createElement("div",{className:"discuss-list"},t.map((t=>A.createElement(ae,{item:t,key:t.id,articleId:a,userInfo:n,commentId:t.id,setCommentList:e.setCommentList,commentList:e.commentList,onReply:s,replyVisible:r.commentId===t.id&&!r.replyId},t.replies&&t.replies.map((o=>A.createElement(ae,{item:o,key:o.id,articleId:a,userInfo:n,commentId:t.id,replyId:o.id,setCommentList:e.setCommentList,commentList:e.commentList,onReply:s,replyVisible:r.commentId===t.id&&r.replyId===o.id})))))))};var se=t(6726);const{TextArea:oe}=P.A,ie=e=>{let{onChange:n,onSubmit:t,value:a}=e;return A.createElement("div",null,A.createElement(Z.A.Item,null,A.createElement(oe,{rows:4,placeholder:"说点什么...",onChange:n,value:a})),A.createElement(Z.A.Item,null,A.createElement("div",{className:"controls"},A.createElement(J.A,{className:"disscus-btn",htmlType:"submit",onClick:t,type:"primary"},"发布"))))};function ce(e){const n=(0,D.wA)(),t=(0,D.d4)((e=>e.user));console.log(t);const a=(0,se.Ay)(),{username:r,userId:s}=t,{commentList:o,articleId:i}=e,[c,l]=(0,A.useState)(""),m=e=>{switch(console.log(e),e){case"login":a.emit("openSignModal","login");break;case"register":a.emit("openSignModal","register");break;case"loginout":n((0,q.GJ)())}};return A.createElement("div",{id:"discuss"},A.createElement("div",{className:"discuss-header"},A.createElement("div",null,A.createElement("span",{className:"discuss-count"},(0,F.H1)(o)),-1!==i?"条评论":"条留言"),A.createElement("span",{className:"discuss-user"},A.createElement(W.A,{menu:r?{items:[{key:"loginout",label:"注销"}]}:{items:[{key:"login",label:A.createElement("div",{onClick:()=>m("login")},"登录")},{key:"register",label:A.createElement("div",{onClick:()=>m("register")},"注册")}]},trigger:["click","hover"]},r?A.createElement(ee.A,{userInfo:t}):A.createElement("span",null,"未登录用户   ",A.createElement(G.A,null)))),A.createElement(x.A,{className:"hr"})),A.createElement(K.A,{avatar:r?A.createElement(ee.A,{userInfo:t}):A.createElement(V.A,{style:{fontSize:40,margin:"5px 5px 0 0"}}),content:A.createElement(ie,{onChange:e=>l(e.target.value),onSubmit:async()=>{if(!c)return;if(!t.username)return y.Ay.warn("您未登陆，请登录后再评论。");let n={content:c,userId:s,articleId:parseInt(i),type:1},A=await(0,Y.E)("/createComment",{data:n});200==A.status?(y.Ay.success("发布评论成功！"),l(""),e.setCommentList(A.data.comments)):y.Ay.error(A.errorMessage)},value:c})}),A.createElement(re,{commentList:o,articleId:i,setCommentList:e.setCommentList}))}ce.propTypes={commentList:M().array.isRequired};const le=ce;var me=t(261),de=t(6746),pe=t(234);const ue=function(){const{id:e}=(0,a.g)(),[n,t]=(0,A.useState)(!1),[r,s]=(0,A.useState)({}),[o,i]=(0,A.useState)([]),[c,l]=(0,A.useState)({title:"",content:"",createdAt:"",comments:[],viewCount:0,goodCount:0}),{content:m,title:d,createdAt:p,viewCount:u,comments:E,goodCount:g}=c;(0,A.useEffect)((()=>{t(!0),Promise.allSettled([h(),f()]).then((()=>t(!1))).catch((e=>{t(!1),console.error(e)}))}),[e]);const f=async function(){let e={pageNum:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,pageSize:arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,keyword:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""};try{const n=await(0,Y.E)("/getRecommendArticleList",{data:e});n?.data.rows&&i(n?.data.rows)}catch(e){console.error(e)}},h=async()=>{let n=await(0,Y.E)("/findArticleById",{data:{id:e}});if(200==n.status){let e=n.data;e.content=e.content.replace(/(\n|\r|\r\n|↵)/g,"<br />"),l(e),s(e.user)}else y.Ay.error(n.errorMessage)};return A.createElement(C.A,{tip:"加载中...",spinning:n},A.createElement(v.A,null),A.createElement("article",{className:"app-article"},A.createElement("div",{className:"post-header"},A.createElement("h1",{className:"post-title"},d),A.createElement("div",{className:"article-desc"},A.createElement("span",{className:"post-time"},A.createElement(me.A,null),"  发布于：  ",A.createElement("span",null,p.slice(0,10))),A.createElement(x.A,{type:"vertical"}),A.createElement("a",{className:"comment-count",href:"#discuss",style:{color:"inherit"}},A.createElement(de.A,null),A.createElement("span",{style:{marginRight:5}}," ",(0,F.H1)(E))),A.createElement(pe.A,{style:{marginRight:2}}),A.createElement("span",null,u))),A.createElement("div",{className:"post-content"},A.createElement("div",{className:"article-userInfo"},A.createElement(T,{authorInfo:r}),A.createElement(b.A,{articleList:o})),A.createElement("div",{className:"article-detail"},A.createElement("div",{dangerouslySetInnerHTML:{__html:m}}),A.createElement(le,{articleId:e,commentList:E,setCommentList:e=>{l({...c,comments:e})}})))))}},52:(e,n,t)=>{t.d(n,{H1:()=>A}),t(5474);const A=e=>{if(!e)return 0;let n=e.length;return e.forEach((e=>{n+=e?.replies.length})),n}},6705:(e,n,t)=>{t.d(n,{A:()=>o});var A=t(1354),a=t.n(A),r=t(6314),s=t.n(r)()(a());s.push([e.id,".au-card .ant-card-body {\n  min-height: 128px;\n}\n.au-card .au-avatar {\n  text-align: center;\n}\n.au-card .au-text {\n  margin: 7px;\n}\n","",{version:3,sources:["webpack://./src/components/AuthorInfo/index.less"],names:[],mappings:"AAAA;EAEQ,iBAAA;AAAR;AAFA;EAKQ,kBAAA;AAAR;AALA;EAQQ,WAAA;AAAR",sourcesContent:[".au-card {\n    .ant-card-body {\n        min-height: 128px;\n    }\n    .au-avatar {\n        text-align: center;\n    }\n    .au-text {\n        margin: 7px;\n    }\n}\n"],sourceRoot:""}]);const o=s},2364:(e,n,t)=>{t.d(n,{A:()=>o});var A=t(1354),a=t.n(A),r=t(6314),s=t.n(r)()(a());s.push([e.id,"#discuss {\n  font-family: 'Lato', 'PingFang SC', 'Microsoft YaHei', sans-serif;\n}\n#discuss .discuss-header {\n  padding: 20px;\n  color: #555;\n  font-size: 16px;\n}\n#discuss .discuss-header .discuss-count {\n  color: #6190e8;\n  border-bottom: 1px dotted #6190e8;\n  margin-right: 5px;\n}\n#discuss .discuss-header .hr {\n  margin: 10px 0 0 0;\n}\n#discuss .discuss-header .discuss-user {\n  display: flex;\n  justify-content: end;\n  cursor: pointer;\n}\n#discuss .controls {\n  float: right;\n}\n#discuss .controls .controls-tip-icon {\n  color: #6190e8;\n  margin-right: 4px;\n}\n#discuss .controls .controls-tip {\n  margin-right: 20px;\n  color: #6190e8;\n}\n#discuss .reply-form {\n  overflow: hidden;\n}\n#discuss .reply-form .reply-form-controls {\n  float: right;\n  padding: 10px 0;\n}\n#discuss .reply-form .reply-form-controls .tip {\n  color: #c2c2c2;\n  margin-right: 8px;\n  font-size: 13px;\n}\n#discuss .ant-comment-content:hover .icon-delete {\n  display: inline-block;\n}\n#discuss .ant-popover-open .icon-delete {\n  display: inline-block;\n}\n#discuss .icon-delete.active {\n  display: inline-block;\n}\n#discuss .ant-comment-inner {\n  padding: 6px 0;\n}\n#discuss .ant-comment-actions {\n  margin-top: 0;\n}\n#discuss .ant-comment-content-detail p {\n  white-space: inherit;\n  margin-bottom: 0;\n}\n@media screen and (max-width: 736px) {\n  .controls {\n    width: 100%;\n    margin-top: -10px;\n  }\n  .controls .disscus-btn {\n    width: 100%;\n  }\n  .controls .controls-tip,\n  .controls .controls-tip-icon {\n    display: none;\n  }\n}\n","",{version:3,sources:["webpack://./src/components/Discuss/index.less"],names:[],mappings:"AAAA;EACI,iEAAA;AACJ;AAFA;EAGM,aAAA;EACA,WAAA;EACA,eAAA;AAEN;AAPA;EAOQ,cAAA;EACA,iCAAA;EACA,iBAAA;AAGR;AAZA;EAYQ,kBAAA;AAGR;AAfA;EAeQ,aAAA;EACA,oBAAA;EACA,eAAA;AAGR;AApBA;EAqBM,YAAA;AAEN;AAvBA;EAuBQ,cAAA;EACA,iBAAA;AAGR;AA3BA;EA2BQ,kBAAA;EACA,cAAA;AAGR;AA/BA;EAiCM,gBAAA;AACN;AAlCA;EAmCQ,YAAA;EACA,eAAA;AAER;AAtCA;EAsCU,cAAA;EACA,iBAAA;EACA,eAAA;AAGV;AA3CA;EA+CQ,qBAAA;AADR;AA9CA;EAqDQ,qBAAA;AAJR;AAjDA;EA0DM,qBAAA;AANN;AApDA;EA8DM,cAAA;AAPN;AAvDA;EAkEM,aAAA;AARN;AA1DA;EAqEM,oBAAA;EACA,gBAAA;AARN;AAYE;EACE;IACE,WAAA;IACA,iBAAA;EAVJ;EAQE;IAKI,WAAA;EAVN;EAKE;;IASI,aAAA;EAVN;AACF",sourcesContent:["#discuss {\n    font-family: 'Lato', 'PingFang SC', 'Microsoft YaHei', sans-serif;\n    .discuss-header {\n      padding: 20px;\n      color: #555;\n      font-size: 16px;\n      .discuss-count {\n        color: #6190e8;\n        border-bottom: 1px dotted #6190e8;\n        margin-right: 5px;\n      }\n      .hr {\n        margin: 10px 0 0 0;\n      }\n      .discuss-user {\n        display: flex;\n        justify-content: end;\n        cursor: pointer;\n      }\n    }\n    .controls {\n      float: right;\n      .controls-tip-icon {\n        color: #6190e8;\n        margin-right: 4px;\n      }\n      .controls-tip {\n        margin-right: 20px;\n        color: #6190e8;\n      }\n    }\n  \n    .reply-form {\n      overflow: hidden;\n      .reply-form-controls {\n        float: right;\n        padding: 10px 0;\n        .tip {\n          color: #c2c2c2;\n          margin-right: 8px;\n          font-size: 13px;\n        }\n      }\n    }\n  \n    .ant-comment-content:hover {\n      .icon-delete {\n        display: inline-block;\n      }\n    }\n  \n    .ant-popover-open {\n      .icon-delete {\n        display: inline-block;\n      }\n    }\n  \n    .icon-delete.active {\n      display: inline-block;\n    }\n  \n    .ant-comment-inner {\n      padding: 6px 0;\n    }\n  \n    .ant-comment-actions {\n      margin-top: 0;\n    }\n    .ant-comment-content-detail p {\n      white-space: inherit;\n      margin-bottom: 0;\n    }\n  }\n  \n  @media screen and (max-width: 736px) {\n    .controls {\n      width: 100%;\n      margin-top: -10px;\n  \n      .disscus-btn {\n        width: 100%;\n      }\n      .controls-tip,\n      .controls-tip-icon {\n        display: none;\n      }\n    }\n  }\n  "],sourceRoot:""}]);const o=s},3304:(e,n,t)=>{t.d(n,{A:()=>o});var A=t(1354),a=t.n(A),r=t(6314),s=t.n(r)()(a());s.push([e.id,".ant-card-body {\n  padding: 10px 17px !important;\n  background-color: #fff;\n}\n.ant-card-body .re-card {\n  display: flex;\n  flex-direction: column;\n  cursor: default;\n}\n.ant-card-body .re-card .re-title {\n  font-size: 17px;\n  font-weight: 500;\n  text-align: center;\n  font-family: Helvetica, sans-serif;\n  color: #e0730d;\n}\n.ant-card-body .re-card .re-list {\n  margin-top: 20px;\n}\n.ant-card-body .re-card .re-list .re-content {\n  font-size: 13px;\n  color: black;\n}\n.ant-card-body .re-card .re-list .re-content:hover {\n  cursor: pointer;\n  color: #fc5531;\n}\n","",{version:3,sources:["webpack://./src/components/Recommend/index.less"],names:[],mappings:"AAAA;EACI,6BAAA;EACA,sBAAA;AACJ;AAHA;EAIQ,aAAA;EACA,sBAAA;EACA,eAAA;AAER;AARA;EAQY,eAAA;EACA,gBAAA;EACA,kBAAA;EACA,kCAAA;EACA,cAAA;AAGZ;AAfA;EAeY,gBAAA;AAGZ;AAlBA;EAiBgB,eAAA;EACA,YAAA;AAIhB;AAtBA;EAqBgB,eAAA;EACA,cAAA;AAIhB",sourcesContent:[".ant-card-body {\n    padding: 10px 17px !important;\n    background-color: #fff;\n    .re-card {\n        display: flex;\n        flex-direction: column;\n        cursor: default;\n        .re-title {\n            font-size: 17px;\n            font-weight: 500;\n            text-align: center;\n            font-family: Helvetica, sans-serif;\n            color: #e0730d;\n        }\n        .re-list {\n            margin-top: 20px;\n            .re-content {\n                font-size: 13px;\n                color: black;\n            }\n            .re-content:hover {\n                cursor: pointer;\n                color: #fc5531;\n            }\n        }\n    }\n}"],sourceRoot:""}]);const o=s},2047:(e,n,t)=>{t.d(n,{A:()=>o});var A=t(1354),a=t.n(A),r=t(6314),s=t.n(r)()(a());s.push([e.id,'.app-article {\n  min-height: 100vh;\n  height: calc(100% - 45px);\n  margin-top: 32px;\n  padding: 0 0 72px 0;\n}\n.app-article .post-header {\n  text-align: center;\n  padding: 20px 0;\n  border-bottom: 1px solid #e8e8e8;\n}\n.app-article .post-header .post-title {\n  color: #0d1a26;\n  font-size: 1.7em;\n  font-weight: 400;\n  margin-top: 0;\n}\n.app-article .post-header .others {\n  vertical-align: middle;\n  margin-top: 10px;\n  color: rgba(0, 0, 0, 0.45);\n}\n.app-article .post-header .others a {\n  color: inherit;\n}\n.app-article .post-content {\n  display: flex;\n  flex-direction: row;\n}\n.app-article .post-content .article-userInfo {\n  width: 20vw;\n  border-right: 1px solid #fff;\n}\n.app-article .post-content .article-detail {\n  flex: 1;\n  padding: 20px;\n  font-size: 17px;\n  font-weight: 800;\n  color: black;\n  font-family: "Microsoft YaHei", "SimSun", "STHeiti";\n}\n',"",{version:3,sources:["webpack://./src/page/article/index.less"],names:[],mappings:"AAAA;EACI,iBAAA;EACA,yBAAA;EACA,gBAAA;EACA,mBAAA;AACJ;AALA;EAWQ,kBAAA;EACA,eAAA;EACA,gCAAA;AAHR;AAVA;EAeU,cAAA;EACA,gBAAA;EACA,gBAAA;EACA,aAAA;AAFV;AAhBA;EAwBU,sBAAA;EACA,gBAAA;EACA,0BAAA;AALV;AArBA;EAsBY,cAAA;AAEZ;AAxBA;EA8BQ,aAAA;EACA,mBAAA;AAHR;AA5BA;EAiCY,WAAA;EACA,4BAAA;AAFZ;AAhCA;EAqCY,OAAA;EACA,aAAA;EACA,eAAA;EACA,gBAAA;EACA,YAAA;EACA,mDAAA;AAFZ",sourcesContent:['.app-article{\n    min-height: 100vh;\n    height: calc(100% - 45px);\n    margin-top: 32px;\n    padding: 0 0 72px 0;\n    // background: url(\'../../../public/cback.jpeg\');\n    // background-repeat: no-repeat;\n    // background-size: cover;\n    // background: #50a3a2;\n    // background: linear-gradient(to bottom right, #50a3a2 0%, #53e3a6 100%);\n    .post-header {\n        text-align: center;\n        padding: 20px 0;\n        border-bottom: 1px solid #e8e8e8;\n        .post-title {\n          color: #0d1a26;\n          font-size: 1.7em;\n          font-weight: 400;\n          margin-top: 0;\n        }\n        .others {\n          a {\n            color: inherit;\n          }\n          vertical-align: middle;\n          margin-top: 10px;\n          color: rgba(0, 0, 0, 0.45);\n        }\n    }\n    .post-content {\n        display: flex;\n        flex-direction: row;\n        .article-userInfo {\n            width: 20vw;\n            border-right: 1px solid #fff;\n        }\n        .article-detail {\n            flex: 1;\n            padding: 20px;\n            font-size: 17px;\n            font-weight: 800;\n            color: black;\n            font-family: "Microsoft YaHei", "SimSun", "STHeiti";\n        }\n    }\n}'],sourceRoot:""}]);const o=s}}]);
//# sourceMappingURL=936.bundle.js.map