"use strict";(self.webpackChunkcommit_front=self.webpackChunkcommit_front||[]).push([[973],{4973:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var a=n(6540),i=n(5072),A=n.n(i),l=n(7825),r=n.n(l),o=n(7659),s=n.n(o),c=n(5056),d=n.n(c),m=n(540),g=n.n(m),p=n(1113),u=n.n(p),y=n(6460),E={};E.styleTagTransform=u(),E.setAttributes=d(),E.insert=s().bind(null,"head"),E.domAPI=r(),E.insertStyleElement=g(),A()(y.A,E),y.A&&y.A.locals&&y.A.locals;var f=n(8159),x=n(2691),k=n(400),h=n(5708),N=n.n(h),w=n(6270),b=n(870),C=n(8073),v=(n(3305),n(2896)),I=n(7767),_=n(9237),B=n(4382),T={};T.styleTagTransform=u(),T.setAttributes=d(),T.insert=s().bind(null,"head"),T.domAPI=r(),T.insertStyleElement=g(),A()(B.A,T),B.A&&B.A.locals&&B.A.locals;const{CheckableTag:J}=w.A,S=[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],j=[{tagName:"JavaScript",id:1,key:"1"},{tagName:"Java",id:2,key:"2"},{tagName:"php",id:3,key:"3"},{tagName:"Python",id:4,key:"4"},{tagName:"c语言",id:5,key:"5"},{tagName:"c++",id:6,key:"6"},{tagName:"c#",id:7,key:"7"},{tagName:"css",id:8,key:"8"},{tagName:"node.js",id:9,key:"9"},{tagName:"go",id:10,key:"10"},{tagName:"TypeScript",id:11,key:"11"},{tagName:"reacr",id:12,key:"12"},{tagName:"vue",id:13,key:"13"},{tagName:"webpack",id:14,key:"14"},{tagName:"vite",id:15,key:"15"},{tagName:"less",id:16,key:"16"},{tagName:"sass",id:17,key:"17"},{tagName:"html",id:18,key:"18"},{tagName:"npm",id:19,key:"19"},{tagName:"express",id:20,key:"20"},{tagName:"es6",id:21,key:"21"},{tagName:"antd",id:22,key:"22"},{tagName:"elementui",id:23,key:"23"},{tagName:"layui",id:24,key:"24"},{tagName:"angular",id:25,key:"25"},{tagName:"koa",id:26,key:"26"}],z=function(e){const t=(0,I.Zp)(),[n,i]=(0,a.useState)(""),[A,l]=(0,a.useState)(""),[r,o]=(0,a.useState)([]),s=(0,v.d4)((e=>e.user));(0,a.useEffect)((()=>{i(e.articleInfo.content),l(e.articleInfo.title)}),[e.articleInfo]);return a.createElement("div",{className:"article_md"},a.createElement(b.A,{placeholder:"请输入文章标题",className:"title-input",bordered:!1,value:A,onChange:e=>{l(e.target.value)}}),a.createElement("div",{className:"article_tags"},a.createElement("span",{style:{fontSize:"14px",fontWeight:"bold",marginTop:"5px"}},"文章标签："),r.map((e=>a.createElement(w.A,{key:e,onClose:()=>(e=>{console.log(e);const t=r.filter((t=>t!==e));console.log("减少"),console.log(t),o(t)})(e),className:"selectTag",closable:!0},e))),a.createElement(C.A,{placement:"bottom",content:a.createElement("div",{className:"popover"},j.map((e=>a.createElement(J,{key:e.id,checked:r.indexOf(e.tagName)>-1,className:"selectTag",onChange:t=>((e,t)=>{if(r.length>4&&t)return void x.Ay.info("最多添加5个标签哦");console.log(t);const n=t?[...r,e.tagName]:r.filter((t=>t!==e.tagName));console.log("添加"),console.log(n),o(n)})(e,t)},e.tagName)))),trigger:"click"},a.createElement(w.A,{key:"999",className:"selectTag"},a.createElement("span",null,a.createElement(_.A,null),a.createElement("span",{style:{marginLeft:"5px"}},"添加文章标签"))))),a.createElement(N(),{className:"content_md",theme:"snow",value:n,onChange:e=>{i(e)},modules:{toolbar:S},placeholder:"请输入内容"}),a.createElement("div",{className:"content_btn"},a.createElement(k.A,{type:"primary",onClick:e.isEdit?async()=>{console.log("修改");let{userId:a}=s;if(!A)return void x.Ay.warning("请输入标题！");if(!n)return void x.Ay.warning("你的内容捏？");if(!a)return void x.Ay.warning("请先登陆！");let i={title:A,content:n,authorId:a,articleId:e.articleInfo.id};const l=await(0,f.E)("/editArticle",{data:i});200==l.status?(x.Ay.success("修改成功！"),t("/help",{state:{key:"1"}})):x.Ay.error(l.errorMessage)}:async()=>{console.log("新增");let{userId:e}=s;if(!A)return void x.Ay.warning("请输入标题！");if(0===r.length)return void x.Ay.warning("请选择文章标签！");if(!n)return void x.Ay.warning("你的内容捏？");if(!e)return void x.Ay.warning("请先登陆！");console.log(r);let a={title:A,content:n,authorId:e,tagList:r};const i=await(0,f.E)("/createArticle",{data:a});200==i.status?(x.Ay.success("发布成功！"),t("/")):x.Ay.error(i.errorMessage)}},"提交")))},M=function(){const[e,t]=(0,a.useState)(!1),[n,i]=(0,a.useState)({}),A=(0,I.zy)(),l=(0,I.Zp)();(0,v.d4)((e=>e.user)),(0,a.useEffect)((()=>{console.log(A),A.state&&(r(A.state.editArticleId),t(!0))}),[]);const r=async e=>{let t=await(0,f.E)("/findArticleById",{data:{id:e}});if(200==t.status){let e=t.data;e&&(console.log(e),i(e))}else x.Ay.error(t.errorMessage)};return a.createElement("div",{className:"admin-edit-article"},a.createElement("div",null,a.createElement(z,{isEdit:e,articleInfo:n}),a.createElement("div",{className:"write-button"},a.createElement(k.A,{type:"primary",onClick:()=>{e?l("/help",{state:{key:"1"}}):l("/")}},"返回"))))}},4382:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(1354),i=n.n(a),A=n(6314),l=n.n(A)()(i());l.push([e.id,".article_md {\n  display: flex;\n  flex-direction: column;\n}\n.article_md .title-input {\n  font-size: 20px;\n  font-weight: bold;\n}\n.article_md .title-input {\n  width: 60%;\n}\n.article_md .content_md {\n  min-height: 280px;\n  margin-top: 10px;\n}\n.article_md .content_md .ql-container {\n  height: 280px;\n}\n.article_md .content_btn {\n  display: flex;\n  justify-content: end;\n  padding: 10px;\n}\n.article_md .article_tags {\n  margin: 10px 0;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n}\n.popover {\n  width: 300px;\n}\n.selectTag {\n  cursor: pointer;\n  margin: 5px;\n}\n","",{version:3,sources:["webpack://./src/components/MdEditor/index.less"],names:[],mappings:"AAAA;EACE,aAAA;EACA,sBAAA;AACF;AAHA;EAII,eAAA;EACA,iBAAA;AAEJ;AAPA;EAQI,UAAA;AAEJ;AAVA;EAWI,iBAAA;EACA,gBAAA;AAEJ;AAdA;EAcM,aAAA;AAGN;AAjBA;EAkBI,aAAA;EACA,oBAAA;EACA,aAAA;AAEJ;AAtBA;EAuBI,cAAA;EACA,aAAA;EACA,eAAA;EACA,mBAAA;AAEJ;AAEA;EACE,YAAA;AAAF;AAGA;EACE,eAAA;EACA,WAAA;AADF",sourcesContent:[".article_md {\n  display: flex;\n  flex-direction: column;\n  .title-input {\n    font-size: 20px;\n    font-weight: bold;\n  }\n  .title-input {\n    width: 60%;\n  }\n  .content_md {\n    min-height: 280px;\n    margin-top: 10px;\n    .ql-container {\n      height: 280px;\n    }\n  }\n  .content_btn {\n    display: flex;\n    justify-content: end;\n    padding: 10px;\n  }\n  .article_tags {\n    margin: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: row;\n  }\n}\n\n.popover {\n  width: 300px;\n}\n\n.selectTag {\n  cursor: pointer;\n  margin: 5px;\n}"],sourceRoot:""}]);const r=l},6460:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(1354),i=n.n(a),A=n(6314),l=n.n(A)()(i());l.push([e.id,".admin-edit-article {\n  padding: 32px;\n  display: flex;\n  flex-direction: column;\n  width: 60%;\n  margin: 64px auto;\n  border: 1px solid #808080;\n}\n.admin-edit-article .title-input {\n  width: 60%;\n}\n.admin-edit-article .content-input {\n  margin-top: 27px;\n}\n.admin-edit-article .action-icon {\n  margin-top: 27px;\n  text-align: right;\n}\n.admin-edit-article .write-button {\n  display: flex;\n  justify-content: space-between;\n}\n","",{version:3,sources:["webpack://./src/page/writeArticle/index.less"],names:[],mappings:"AAAA;EACE,aAAA;EACA,aAAA;EACA,sBAAA;EACA,UAAA;EACA,iBAAA;EACA,yBAAA;AACF;AAPA;EAQI,UAAA;AAEJ;AAVA;EAWI,gBAAA;AAEJ;AAbA;EAcI,gBAAA;EACA,iBAAA;AAEJ;AAjBA;EAkBI,aAAA;EACA,8BAAA;AAEJ",sourcesContent:[".admin-edit-article {\n  padding: 32px;\n  display: flex;\n  flex-direction: column;\n  width: 60%;\n  margin: 64px auto;\n  border: 1px solid #808080;\n  .title-input {\n    width: 60%;\n  }\n  .content-input {\n    margin-top: 27px;\n  }\n  .action-icon {\n    margin-top: 27px;\n    text-align: right;\n  }\n  .write-button {\n    display: flex;\n    justify-content: space-between;\n  }\n}"],sourceRoot:""}]);const r=l}}]);
//# sourceMappingURL=973.bundle.js.map